wish =

simplify the use.vpc.tunnel.sh command

---

it should be as simple as

1. start the bastian; wait for it to be available
2. start the tunnel; wait for the database to be reachable


---

contract

- via: { bastion.tag.{ key, value } }
- into: { database.clusterId: string }
- from: { port: number }


e.g.,

declare the resource to operate on

```ts
const cluster = RefByUnique<typeof DeclaredAwsRdsCluster>.as({
  name: 'ahbodedb',
});
const bastion = RefByUnique<typeof DeclaredAwsEc2Instance>.as({
  exid: 'vpc-main-bastion',
})
const tunnel = RefByUnique<typeof DeclaredAwsVpcTunnel>.as({
  via: { bastion }
  into: { cluster },
  from: { host: 'localhost', port: 777_5432 },
})
```

then, use it

```ts
await setVpcTunnel({
  ...tunnel,
  status: "OPEN", // set it as open on the local machine
})
```

or via declastruct

e.g.,

`TUNNEL_AS=OPEN npx declastruct apply --wish provision/vpc.tunnel.ts`



and, later

```ts
await setVpcTunnel({
  ...tunnel,
  status: "CLOSED",
})
```

---

eventually, can provision the dns for localuse too

e.g.,

```ts
const hostAlias = DeclaredUnixHostAlias.as({
  via: '/etc/hosts', // the only option supported
  from: `aws.ssmproxy.${cluster.name}.${environment.access}`,
  into: `localhost`
})
```

