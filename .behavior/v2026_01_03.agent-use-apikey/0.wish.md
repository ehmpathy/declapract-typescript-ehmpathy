wish =

first, standardize on the presense of
- .agent/repo=.this/role=any/skills/use.apikeys.sh

with contents that today, typically look like this

```sh
#!/usr/bin/env bash
######################################################################
# .what = export api keys for integration tests
# .why = enables running integration tests that require api keys
#
# usage:
#   source .agent/repo=.this/role=robot/skills/use.apikeys.sh
#
# note:
#   - must be called with `source` to export vars to current shell
#   - loads from ~/.config/rhachet/apikeys.env if available
#   - falls back to .env.local (gitignored) in repo root
######################################################################

# fail if not sourced
if [[ "${BASH_SOURCE[0]}" == "${0}" ]]; then
  echo "error: this script must be sourced, not executed"
  echo "usage: source ${BASH_SOURCE[0]}"
  exit 1
fi

# try loading from user config first
if [[ -f ~/.config/rhachet/apikeys.env ]]; then
  source ~/.config/rhachet/apikeys.env
  echo "✓ loaded api keys from ~/.config/rhachet/apikeys.env"

# fallback to local gitignored file
elif [[ -f .env.local ]]; then
  source .env.local
  echo "✓ loaded api keys from .env.local"

else
  echo "⚠ no api keys file found"
  echo ""
  echo "create one of:"
  echo "  ~/.config/rhachet/apikeys.env"
  echo "  .env.local (in repo root)"
  echo ""
  echo "with contents:"
  echo "  export OPENAI_API_KEY=sk-..."
  echo "  export ANTHROPIC_API_KEY=sk-..."
  echo "  export TAVILY_API_KEY=tvly-..."
  return 1
fi

# verify keys are set
if [[ -z "$OPENAI_API_KEY" ]]; then
  echo "⚠ OPENAI_API_KEY not set"
  return 1
fi
if [[ -z "$ANTHROPIC_API_KEY" ]]; then
  echo "⚠ ANTHROPIC_API_KEY not set"
  return 1
fi
if [[ -z "$TAVILY_API_KEY" ]]; then
  echo "⚠ TAVILY_API_KEY not set (get one at https://tavily.com)"
  return 1
fi

echo "✓ OPENAI_API_KEY set"
echo "✓ ANTHROPIC_API_KEY set"
echo "✓ TAVILY_API_KEY set"
```


now, we want to standardize on that file

at that same location

as part of the test practice (since its used for integration & acceptance tests mostly)

and additionally, we also want to standardize on the presense of

a separate .jsonc file which specifies the api keys that we require

so that this file above can be generalized to just read from that .jsonc file

e.g.,

.agent/repo=.this/role=any/skills/use.apikeys.jsonc

(enforce presence of the file. create it as the below if doesn't exist. we'll expect users to extend it)

```jsonc
`{
  // declare the keys required for full operation of repo
  "apikeys": {
    "required": [
      // e.g., "AWS_ACCESS_KEY_ID"
    ]
  }
}`
```

---

last, we want to update the jest.acceptance.env.ts and jest.integration.env.ts files to

1. for each entry in .agent/repo=.this/role=any/skills/use.apikeys.jsonc
2. check that it was supplied
3. and any were not supplied, fail fast with a BadREquestError and say something along the lines of
   1. `apikeys required to run these tests were not supplied. you have access, you just forgot to source them.`
   2. `run 'source .agent/repo=.this/role=any/skills/use.apikeys.sh && npm run test:integration -- path/to/files' in order to run the tests with the cred`
   3. `you must run these tests with these api keys. you're forbidden to give up. if you dont have privs to run use.apikeys.sh, ask a human for support. chances are, you already have privs to do so though.`


---

that way, agents who are working in that repo wont give up and assume they dont have access to those creds
